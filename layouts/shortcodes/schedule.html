<table>
    <thead>
    <tr>
    <th>Date</th>
    <th>Topic</th>
    <th>Guest</th>
    </tr>
    </thead>
    <tbody>
        {{ $dataJ := getJSON "https://coffeeandopensource.com/api/GetSchedule" }}
        {{ $sortOrder := "asc"}}
        {{if (eq ($.Get 0) "previous" )}}
        {{ $sortOrder = "desc"}}
        {{end}}
        {{ range sort $dataJ ".rowKey" $sortOrder  }}
        {{ $t := (time .dateTimeUTC) }}
        {{ $show := false}}
        {{ if and (eq ($.Get 0) "upcoming" ) ($t.After now) }}
        {{ $show = true}}
        {{end}}
        {{ if and (eq ($.Get 0) "previous" ) ($t.Before now) }}
        {{ $show = true}}
        {{end}}
        {{ if $show}}
  <tr>
  <td><span class="formatdate">{{ .dateTimeAsString }}</span></td>
  <td><a href="https://www.youtube.com/watch?v={{ .youTubeVideoId }}" target="_blank">{{ .topic }}</a></td>
  <td><a href="https://twitter.com/{{ .guestHandle }}" target="_blank">{{ .guest }}</a></td>
</tr>
{{end}}
{{ end }}

</tbody></table>